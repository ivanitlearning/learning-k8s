# Qns

Some questions that arise while going through KodeKloud's course. To be updated periodically. These arise mostly from stream of consciousness musing, so don't expect it to be properly structured.

1. Difference between ReplicaSet and Deployment?

   * Deployment appears to support rollback eg. Change nginx version back to older one.

2. There seems to be no way to list the pods of a specific named deployment, is there? Only [by labels](https://stackoverflow.com/questions/52957227/kubectl-command-to-list-pods-of-a-deployment-in-kubernetes/52957569)?

   I could do this but I first need to find the exact label generated by k8s.

   ```text
   root@controlplane:~# kubectl get pods --show-labels
   NAME                                   READY   STATUS             RESTARTS   AGE     LABELS
   deployment-1-8598555cd4-97hsm          1/1     Running            0          6m46s   name=busybox-pod,pod-template-hash=8598555cd4
   deployment-1-8598555cd4-nhw4r          1/1     Running            0          6m42s   name=busybox-pod,pod-template-hash=8598555cd4
   frontend-deployment-56d8ff5458-gckj8   0/1     ImagePullBackOff   0          24m     name=busybox-pod,pod-template-hash=56d8ff5458
   frontend-deployment-56d8ff5458-rdqjr   0/1     ImagePullBackOff   0          24m     name=busybox-pod,pod-template-hash=56d8ff5458
   frontend-deployment-56d8ff5458-vw7fh   0/1     ImagePullBackOff   0          24m     name=busybox-pod,pod-template-hash=56d8ff5458
   frontend-deployment-56d8ff5458-zq4mp   0/1     ImagePullBackOff   0          24m     name=busybox-pod,pod-template-hash=56d8ff5458
   root@controlplane:~# kubectl get pods --selector=name=busybox-pod,pod-template-hash=8598555cd4
   NAME                            READY   STATUS    RESTARTS   AGE
   deployment-1-8598555cd4-97hsm   1/1     Running   0          12m
   deployment-1-8598555cd4-nhw4r   1/1     Running   0          12m
   ```

3. How does NodePort work for loadbalancing among multiple pods with same selector in a node?

4. In case you face problems trying to use the X11 display after switching to root with MobaXterm, [read this](https://blog.mobatek.net/post/how-to-keep-X11-display-after-su-or-sudo/)

5. Do `minikube start` when you start up the instance

6. How exactly do you use DS for monitoring software?

7. What exactly is `--leader-elect` used for in custom scheduler? How do I use it?

8. Is there a way to upgrade kubeadm and kubelet on worker nodes without SSH to it from master?

9. Why are there extra steps in the solution demo for `etcdctl snapshot restore` not mentioned in the lecture?

10. The documentation for restoring etcdctl cluster [links to etcd.io](https://kubernetes.io/docs/tasks/administer-cluster/configure-upgrade-etcd/), but this is outside kubernetes.io. Can use for exam?

11. In the etcdctl restore lab I omitted these arguments and could restore the svc and deploy, but the pod was still stuck in pending even after 10 min. Is this acceptable?

    ```text
    --inital-cluster="master"=https://127.0.0.1:2379
    --name="master"
    --inital-advertise-peer-urls="https://127.0.0.1:2380"
    --initial-cluster-token="etcd-cluster-1"
    ```

12. Try an etcdctl backup and restore in another lab to see if can work without the issues.

13. 

# Notes

Notes here don't fit into the main notes

1. kube-apiserver is available as a service and binary [only if installed directly](https://stackoverflow.com/questions/51666507/how-can-kube-apiserver-be-restarted?rq=1), otherwise it is provisioned as pod on namespace kube-system by kubeadm